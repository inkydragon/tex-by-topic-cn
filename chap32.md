# 第 32 章 Running TEX

This chapter treats the run modes of TEX, and some other commands associated with the job being processed.

\everyjob Token list that is inserted at the start of each new job.
\jobname Name of the main TEX file being processed.
\end Command to finish off a run of TEX.
\bye Plain TEX macro to force the final output.
\pausing Specify that TEX should pause after each line that is read from a file.
\errorstopmode TEX will ask for user input on the occurrence of an error.
\scrollmode TEX fixes errors itself, but will ask the user for missing files.
\nonstopmode TEX fixes errors itself, and performs an emergency stop on
serious errors such as missing input files.
\batchmode TEX fixes errors itself and performs an emergency stop on serious
errors such as missing input files, but no terminal output is generated.




## 32.1 Jobs

TEX associates with each run a name for the file being processed: the \jobname.

If TEX is run interactively —— meaning that it has been invoked without a file argument, and the user types commands —— the jobname is texput.


The \jobname can be used to generate the names of auxiliary files to be read or written during the run. 

For instance, for a file story.tex the \jobname is story, and writing

> \openout\Auxiliary=\jobname.aux
> \openout\TableOfContents=\jobname.toc

will create the files story.aux and story.toc.





### 32.1.1 Start of the job

TEX starts each job by inserting the \everyjob token list into the command stream. 

Setting this variable during a run of TEX has no use, but a format can use it to identify itself to the user. 

If a format fills the token list, the commands therein are automatically executed when TEX is run using that format.




### 32.1.2 End of the job

A TEX job is terminated by the \end command. This may involve first forcing the output routine to process any remaining material (see Chapter 27). 

If the end of job occurs inside a group TEX will give a diagnostic message. 

The \end command is not allowed in internal vertical mode, because this would be inside a vertical box.




Usually some sugar coating of the \end command is necessary. For instance the plain TEX macro \bye is defined as

> \def\bye{\par\vfill\supereject\end}

where the \supereject takes care of any leftover insertions.




### 32.1.3 The log file

For each run TEX creates a log file. 

Usually this will be a file with as name the value of \jobname, and the extension .log. 

Other extensions such as .lis are used by some implementations. 

This log file contains all information that is displayed on the screen during the run of TEX, but it will display some information more elaborately, and it can contain statistics that are usually not displayed on the screen. 

If the parameter \tracingonline has a positive value, all the log file information will be shown on the screen.




Overfull and underfull boxes are reported on the terminal screen, and they are dumped using the parameters \showboxdepth and \showboxbreadth in the log file (see Chapter 34). 

These parameters are also used for box dumps caused by the \showbox command, and for the dump of boxes written by \shipout if \tracingoutput is set to a positive value.




Statistics generated by commands such as \tracingparagraphs will be written to the log file; 

if \tracingonline is positive they will also be shown on the screen.





Output operations to a stream that is not open, or to a stream with a number that is not in the range 0–15, go to the log file. 

If the stream number is positive, they also go to the terminal.





## 32.2 Run modes

By default, TEX goes into \errorstopmode if an error occurs: it stops and asks for input from the user. 

Some implementations have a way of forcing TEX into errorstopmode when the user interrupts TEX, so that the internal state of TEX can be inspected (and altered). 

See page 307 for ways to switch the run mode when TEX has been interrupted.




Often, TEX can fix an error itself if the user asks TEX just to continue (usually by hitting the return key), but sometimes (for instance in alignments) it may take a while before TEX is on the right track again (and sometimes it never is). 

In such cases the user may want to turn on \scrollmode, which instructs TEX to fix as best it can any occurring error without onfirmation from the user. 

This is usually done by typing ‘s’ when TEX asks for input.




In \scrollmode, TEX also does not ask for input after \show... commands.

However, some errors, such as a file that could not be found for \input, are not so easily remedied, so the user will still be asked for input.




With \nonstopmode TEX will scroll through errors and, in the case of the kind of error that cannot be recovered from, it will make an emergency stop, aborting the run. 

Also TEX will abort the run if a \read is attempted from the terminal. The \batchmode differs only from nonstopmode in that it gives messages only to the log file, not to the terminal.