# 第 26 章 Page ShapePage Shape
页面形状

# sth about box https://www.math.utah.edu/~beebe/reports/2009/boxes.pdf
>>>>>>> page box 页面盒子

本章讨论一些决定了页面形状的参数，并研究它们时怎样出现在纸面上的。
本章讨论一些决定页面大小及其在纸面上显示的参数。
This chapter treats some of the `parameters` that determine the size of the page and how it appears on paper.
# parameters：参数、参量、界限

页面盒子的顶部到本页第一个盒子基线的最小距离。Plain TEX 默认值：10pt
\topskip Minimum distance between the top of the page box and the baseline of the first box on the page. 
Plain TEX default: 10pt

页面相对参考点左右移动的距离。
\hoffset \voffset Distance by which the page is shifted right/down with respect to the reference point.

页面盒子的高度。
\vsize `Height` of the page box. Plain TEX default: 8.9in
# Height：the measurement from base to top 高度、高线

页面盒子的最大深度。
\maxdepth Maximum depth of the page box. Plain TEX default: 4pt

一个盒子能被一个\vsplit操作分割的最大深度
\splitmaxdepth Maximum depth of a box split off by a \vsplit operation. Plain TEX default: \maxdimen






## 26.1 The reference point for global positioning
全局定位参考点

页面定位由TEX的惯例决定：即页面的左上角距离页边1英寸，这也是输出设备比需如实反映的。
The page `positioning` on the paper is governed by a TEX `convention`, to which output device drivers must `adhere`, that the top left point of the page is one inch from the page edges. 
# positioning：定位、布置
# convention：a way in which somthing is usually done 准则、惯例
# adhere：represent truthfully and in detail 如实详细反映、追随、遵守

不幸的是这样做可能会导致许多问题，例如打印机或它使用的页面描述语言可能认为、并把左下角当作参考点。并且出厂默认设为美国纸张大小，但打印机实际上用了欧洲的标准A4纸。
Unfortunately this may lead to lots of trouble, for `instance` if a printer (or the page description language it uses) takes, say, the lower left corner as the reference point, and is factory set to US paper sizes, but is used with European standard A4 paper.
# instance: an example 例子、实例、情况、建议、以...为例

如果指定\hoffset or \voffset为一个非零的值，页面会左右移动，正值代表向右下移动，两方向的移动是独立的。
The page is shifted on the paper if one assigns non-zero values to \hoffset or \voffset: positive values shift to the right and down `respectively`.
# respectively: individually 独立的、各自的





## 26.2 \topskip
\topskip

\topskip 确保了一点：每一页的第一条基线都处于同一位置，即使页面之间的字号不相同或者第一行不含有升部的字母。
The \topskip ensures to a certain point that the first baseline of a page will be at the same location from page to page, even if font sizes are switched between pages or if the first line has no `ascenders`.
# ascenders: 升部(其他字母高于字母x的那部分)

在每页第一个盒子之前都嵌入了铅空。
Before the first box on each page some `glue` is `nserted`. 
# glue: ~~胶~~ 铅空
# - https://www.zhihu.com/question/22347893/answer/21083923 
# nserted: 嵌套的、内嵌的、嵌入

铅空可以和\topskip一起伸缩，它通常的大小是\topskip减去第一个盒子的高度，当结果为负数时，其值为零。
This glue has the same `stretch` and `shrink` as \topskip, but the natural size is the natural size of \topskip minus the height of the first box, or zero if this would be negative.
# stretch: being made longer or wider 伸展、延伸
# shrink: 收缩、、起皱

Plain TEX 将\topskip设为10pt。因此，如果最上面一行的字母的顶部小于等于10点，每一页顶行的基线就处于相同的位置。
Plain TEX sets \topskip to 10pt. Thus the top lines of pages will have their baselines at the same place if the top `portion` of the characters is ten point or less. 
# portion:  a part of a whole; a piece of sth. 一部分

对于现代计算机字体来说，字号小于13点就能满足这个条件；对于大号字体来说，顶行的基线会下沉。
For the Computer Modern fonts this condition is satisfied if the font size is less than (about) 13 points; for larger fonts the baseline of the top line will drop.

假设\parskip=0，对于一个只含有文字的页面来说，页面盒子的高度等于\topskip+\baselineskip的倍数。
The height of the page box for a page containing only text (and assuming a zero \parskip) will be the \topskip plus a number of times the \baselineskip.

因此我们可以定义一个宏，通过页面的行数来计算\vsize
Thus one can define a macro to compute the \vsize from the number of lines on a page:

> code

对于纯文本页面，像这样计算\vsize可以避免未充满的盒子。
Calculating the \vsize this way will prevent underfull boxes for text-only pages.

当页面的首行不是文字时(例如有奇怪的规定要求这样做)，topskip可能造成非预期的影响。
In cases where the page does not start with a line of text (for instance a rule), the topskip may give unwanted effects. 

为了避免这个问题，我们可以以\hbox{}\kern-\topskip作为一页的开头，后面再写你想在页面顶部出现的东西。
To prevent these, start the page with \hbox{}\kern-\topskip followed by what you wanted on top.

类似\topskip，还有一个\splittopskip，它适用于由\vsplit操作产生的页面，详见下一章。
`Analogous` to the \topskip, there is a \splittopskip for pages generated by a \vsplit operation; see the next chapter.
# Analogous: 类似的、可比拟的





## 26.3 Page height and depth

TEX会尝试将页面构建为一个高\vsize的\vbox，参见下下一章的\pagegoal。
TEX tries to build pages as a \vbox of height \vsize; see also \pagegoal in the next chapter.

如果某页的最后一项深度过长，这一页会明显比其他页更长。
If the last item on a page has an `excessive` depth, that page would be `noticeably` longer than other pages. 
# excessive: more than its necessary 过多的、极度的、过分的
# noticeably: 显著的、引人注目的

为了避免这种现象TEX使用\maxdepth限制页面盒子的最大深度。
To prevent this phenomenon TEX uses \maxdepth as the maximum depth of the page box. 

如果继续添加一项会导致页面深度超限，这时参考点会下移直至页面深度恰好等于\maxdepth。
If adding an item to the page would make the depth `exceed` this `quantity`, then the reference point of the page is moved down to make the depth exactly \maxdepth.
# exceed: be greater in number or size 超过
# quantity: 特定的数量、量、数量
# exactly: 恰好是、精确的

通过赋给\topskip无限的弹性： 10pt + 60pt，我们可以在plain TEX观察到“辣鸡页底”的效应。
The `‘raggedbottom’` effect is obtained in plain TEX by giving the \topskip some finite `stretchability`: 10pt plus 60pt. 
# ragged: 破烂的、 不规则的、不协调的 
# bottom：底部
# stretchability: 可伸展性、弹性

因此当box 255到达输出程序时，它的自然高度通常有变化。
Thus the natural height of box 255 can vary when it reaches the output `routine`. 
# routine: (固定)程序、惯例、固定顺序、例行程序

**之后页面以“\dimen0=\dp255 \unvbox255 \ifraggedbottom \kern-\dimen0 \vfil \fi”输出。\vfil **
Pages are then `shipped out` (more or less) as 
# shipped out: 运出去

> code

\vfil 导致topskip设置为自然宽度，所以这样做会产生以下两种效果之一：页面的固定顶部线或可变底部线。
The \vfil causes the topskip to be set at natural width, so the effect is one of a fixed top line and a variable bottom line of the page.


在 \cs{box255} 于 plain \TeX\ 的输出程序中被解包之前，\cs{boxmaxdepth} 被设成 \cs{maxdepth}，这样创建这个盒子时，页面生成器使用的假设会和把 \cs{box255} 放在一起时相同
Before \box255 is unboxed in the plain TEX output `routine`, \boxmaxdepth is set to \maxdepth so that this box will made under the same assumptions that the page builder used when putting together \box255.

\vsplit操作分割盒子的深度由\splitmaxdepth参数控制。
The depth of box `split off` by a \vsplit operation is controlled by the \splitmaxdepth parameter.
# split off: 分离、分裂